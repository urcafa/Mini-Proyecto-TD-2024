---
title: "Mini Proyecto TD 2024"
subtitle: "Entrega parcial"
author: |
  Víctor Álvarez Palomares,  
  Belén Gallego Andreu,  
  Sergio Martínez Yagüe,  
  Ferran Medina Mompó,  
  Carles Pascual i Sivera,  
  y Úrsula Casaus Fabra
date: "`r Sys.Date()`"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introducción



## Importación de los datos

```{r}
# Para extraer los datos de los ficheros .pdf, hay que pasarlos a .txt:
library(pacman)


productos<-a[8:(length(b)-14)]
productos
df<-data.frame(productos=productos )



df <- df %>%
  mutate(unidades = as.numeric(str_extract(productos, "\\d+"))) %>%
  mutate(precio = (substr(productos, nchar(productos) - 3, nchar(productos))),
         productos = sub("^\\d+", "", productos)) 
df


```

```{r}
library(pacman)
p_load(dplyr,lubridate, tidyr, readr, stringr)


separar <- function(a) {
  productos<-a[8:(length(a)-13)]
  df<-data.frame(productos=productos )
  df <- df %>%
  mutate(unidades = as.numeric(str_extract(productos, "\\d+"))) %>%
  mutate(precio = (substr(productos, nchar(productos) - 3, nchar(productos))),
         productos = sub("^\\d+", "", productos)) 
  return(df)
}


a<-read_lines("./data/20231218 Mercadona 60,47 Ôé¼.txt")
b<-read_lines("./data/20231224 Mercadona 37,49 Ôé¼.txt")
c<-read_lines("./data/20231226 Mercadona 25,83 Ôé¼.txt")
d<-read_lines("./data/20231230 Mercadona 66,30 Ôé¼.txt")
f<-read_lines("./data/20240102 Mercadona 70,04 Ôé¼.txt")
g<-read_lines("./data/20240108 Mercadona 83,73 Ôé¼.txt")
h<-read_lines("./data/20240109 Mercadona 7,35 Ôé¼.txt")


separar(a)
separar(b)
#Solo funciona para los dos primeros, los demas tienen caracteres especiales como \ y dan error

```

